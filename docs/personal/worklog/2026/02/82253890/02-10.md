---
tags:
  - type/worklog
  - audience/personal
  - personal/82253890
aliases: []
id: 02-10
---

> 상위: [worklog](../../../README.md) · [personal](../../../../README.md)

# 2026-02-10 작업일지

## 완료

- **TECHIOPS26-271** Observability 쿼리 사전 점검 → In Review
  - 7개 SQL 파일 inventory_master 참조 전수 검증
  - MaintenanceAlarmServiceMapper.xml: 설계 5개 → 실제 1개 (파일 203줄, 라인번호 오류)
  - sql-evt.xml: 설계 5개 → 실제 7개 (단건조회 L1681, 배치이벤트 L1693 추가 발견)
  - 설계 문서(04-functional-spec.md) 9.2, 9.4, 9.5, 9.9 검증 결과 반영
  - Confluence "서비스 인벤토리 UNION ALL 적용 가이드" 페이지 생성 (SREP 스페이스)
- **LUPR-699/700** UNION ALL 적용 가이드 연결
  - 체크리스트 코멘트 추가 + Confluence 가이드 링크 연결
- **LUPR-701** MaintenanceAlarmServiceJob 코드 리뷰 → Done
  - 1차: CRITICAL 3 (Map.of 괄호 버그, 에러 핸들링 누락, 토큰 평문 노출), HIGH 2, MEDIUM 1
  - 2차: CRITICAL 1 (flag 타입 불일치 — String.valueOf→Boolean 비교 실패로 O11y 알림 미발송), 변경검토 1 (finally epoch 0/0)
  - 3차: 수정 확인완료 댓글 + 완료 전환
  - 알럿 이벤트 API 스펙 확인 + 통합 리뷰
- **LUPR-704** Slack Block Kit 템플릿 시스템 코드 리뷰 (luppiter_web)
  - 임동진님 커밋(d6a6291) 리뷰 — 메시지 발송 구조 개편
  - 설계 방향(Template Method + Factory) 일치 확인, 7종 빌더 전부 구현됨
  - 지적사항: 수정필요 3건(SmsSender 로그 복붙, 에러핸들링 제거, 공백), 정리권장 2건, 확인필요 2건
  - Jira 코멘트로 리뷰 결과 등록 완료
- **LUPR-706** Slack Block Kit 발송 엔드포인트 코드 리뷰 (message_bridge)
  - /sendDirect/blockkit 엔드포인트 + sendBlockKitToChannel/sendBlockKitMessage 추가
  - 크로스 프로젝트 파라미터 불일치 발견: LUPR-704에서 ?userId= 로 보내나 컨트롤러는 email/channelId만 수신 → 기존 코드가 email 기준이므로 LUPR-704의 target_type을 "email"로 수정 필요
  - 기타: 재시도 Thread.sleep, 에러 시 HTTP 200 반환
  - Jira 코멘트 등록 완료
- **TECHIOPS26-166** 코드 리뷰 결과 보고
  - LUPR-701 리뷰 결과 요약 코멘트 + 이슈 링크 추가
- **LUPR-690** 이벤트 관리 — 쿼리 수정 방향 댓글 답변
  - 임재홍 의견(inventory_master JOIN 제거) 검토 → sql-evt.xml 확인
  - B 컬럼 미사용 확인했으나, JOIN 제거 시 기존 조회조건 변경(미등록 이벤트 노출) → 단순 제거 X
  - 최종: 인벤토리 필터링 유지 + 서비스/플랫폼 인벤토리 매칭 확장 방향으로 답변
  - 변경이력(1차 안 UNION/LEFT JOIN → 2차 안 JOIN 제거 → 최종 확장) 포함 코멘트 등록
- **LUPR-705** Scheduler DB→API 전환 설계 Confluence 업로드
  - 06-scheduler-api-migration.md 기반 Confluence 페이지 생성 (사용자 직접 생성)
  - LUPR-705 Remote Link 확인, 이전 깨진 코멘트(172216) 삭제
- **LUPR-683** 이벤트 예외 관리 기능 개선 코드 리뷰
  - 커밋 15a25b5 diff (15개 파일, 3,278줄) 전수 리뷰
  - CRITICAL 6건, HIGH 7건, MEDIUM 9건 → 판정: BLOCK
  - AS-IS/TO-BE 포함 상세 리뷰 결과 Jira 코멘트(172286) 등록
  - 주요: 예외 삼킴(C1), 인가 우회(C4), System.out/console.log(C2/C3), OBSERVAILITY 오타(H5), target_ip 전체 UPDATE 위험(H3), JSONObject 캐스팅 오류(H7)
- **(POC)** Claude Code 문서 표준화 — 추후 에픽/태스크 전환 예정
  - 65개 문서에 YAML frontmatter 태그 + breadcrumb 네비게이션 링크 추가
  - MOC 오버뷰 3개 생성 (service-overview, claude-overview, team-personal-overview)
  - hub README 8개 생성 + Dataview 대시보드
  - `.claude/rules/doc-organization.md`에 Obsidian 태그 규칙 추가
- **(티켓 없음)** 인프라 인벤토리 정리
  - CSV 원본에서 핵심 컬럼 추출 (262대, 10개 시스템)
  - 4개 센터 네트워크 토폴로지 시각화 (Mermaid)
- **(티켓 없음)** 환경 설정 / 기타
  - vi→nvim alias, yazi dotfile 표시 설정
  - Apidog MCP 연동 조사 (프로젝트 ID 미확인으로 보류)
  - claude_lessons_learned 문서 3건 생성/업데이트

## Jira 이슈

| 이슈 | 작업 내용 | 상태 변경 |
|------|----------|----------|
| TECHIOPS26-271 | 쿼리 파일 검증 + 설계 문서 갱신 | In Progress → In Review |
| LUPR-699 | UNION ALL 체크리스트 코멘트 + Confluence 링크 | - |
| LUPR-700 | UNION ALL 체크리스트 코멘트 + Confluence 링크 | - |
| LUPR-701 | 코드 리뷰 3회 + 완료 전환 | → Done |
| LUPR-704 | Slack Block Kit 코드 리뷰 (luppiter_web) + Jira 코멘트 | - |
| LUPR-706 | Block Kit 발송 엔드포인트 리뷰 (message_bridge) + Jira 코멘트 | - |
| LUPR-690 | 이벤트 관리 쿼리 수정 방향 검토 + 답변 코멘트 | - |
| LUPR-705 | Confluence 업로드 확인 + 깨진 코멘트 삭제 | - |
| LUPR-683 | 이벤트 예외 관리 코드 리뷰 (BLOCK) + Jira 코멘트 | - |

## 코드 리뷰 (LUPR-704 + LUPR-706)

### LUPR-704 (luppiter_web)
- 설계 대비 빌더 구조 전부 적용 확인 (SlackMessageBuilderFactory에 7종 등록)
- **수정 필요**: SmsSender "Slack" 로그 복붙, SlackSender 에러핸들링 제거, 공백 누락
- **정리 권장**: 빌더별 미사용 ObjectMapper, Template.builder 필드 dead code
- **확인 필요**: 삭제된 SlackChannelSender 하드코딩 토큰 로테이션, EmailSender 의도적 폐기 여부
- 스케줄러 호출부 전환은 스케줄러 머지 시 확인 예정

### LUPR-706 (message_bridge)
- **수정 필요**: LUPR-704의 target_type "userId" → "email" (기존 코드·컨트롤러 모두 email 기준)
- **참고**: 재시도 Thread.sleep 블로킹, 에러 시 HTTP 200 + 문자열 반환

## 코드 리뷰 (LUPR-701)
- **1차**: CRITICAL 3 (Map.of 괄호 버그, 에러 핸들링 누락, 토큰 평문 노출), HIGH 2, MEDIUM 1
- **2차**: CRITICAL 1 (flag 타입 불일치 — O11y 알림 미발송), 변경검토 1 (finally epoch 0/0)
- **3차**: 수정 확인완료

## 코드 리뷰 (LUPR-683) — BLOCK
- **CRITICAL 6**: 예외 삼킴(C1), System.out.println(C2), console.log 4곳(C3), 클라이언트 userAuth 인가 우회(C4), @Transactional 무효화(C5), XSS(C6)
- **HIGH 7**: INSERT+SELECT 한 태그(H1), 삭제 조건 축소(H2), target_ip 전체 UPDATE(H3), JOIN 변경(H4), OBSERVAILITY 오타(H5), 미사용 PagingDto(H6), JSONObject 캐스팅(H7)
- **MEDIUM 9**: 로그 데코레이션, JS 함수 중복, switch default, N+1 API, 하드코딩 stdNm, selectTimeBox 중복, newline 누락 등

## 검증 결과
- MaintenanceAlarmServiceMapper.xml: 설계 5개 → 실제 1개 (파일 203줄, 라인번호 오류)
- sql-evt.xml: 설계 5개 → 실제 7개 (단건조회 L1681, 배치이벤트 L1693 추가 발견)

## 생성/변경 파일
- `docs/support-projects/next-observability/04-functional-spec.md` — 9.2, 9.4, 9.5, 9.9 수정
- `docs/claude_lessons_learned/java/code-review-traps.md` — 신규
- `docs/claude_lessons_learned/java/mybatis-sql-patterns.md` — 신규
- `docs/claude_lessons_learned/common/mcp-tools-guide.md` — ADF 프로젝트 타입별 차이 추가
- `docs/ktcloud/inv/inventory-overview.md`, `Inventory_20260115.csv` — 신규
- `docs/temp/network-topology.md` — 신규

## 특이사항
- LUPR 프로젝트(회사관리형)는 Jira 코멘트에서 ADF taskList 미지원 → bulletList+☐ 폴백
- Confluence SREP 스페이스에 협력사용 가이드 페이지 최초 생성
- yazi 설정: `[mgr]` 섹션 (v26.x에서 `[manager]`가 아닌 `[mgr]`)
- Obsidian Graph View는 `[[wiki-links]]`만 엣지 인식, 태그는 필터용
