---
tags:
  - type/worklog
  - audience/personal
  - personal/82253890
aliases: []
id: 02-11
---

> 상위: [worklog](../../../README.md) · [personal](../../../../README.md)

# 2026-02-11 작업일지

## 완료

- **LUPR-704** Slack Block Kit 템플릿 시스템 재리뷰 → PASS
  - 커밋 b9f55dd 확인, 이전 지적 5건 전부 반영됨
  - SmsSender 로그 복붙 수정, 공백 수정, target_type email 수정, 미사용 ObjectMapper 6건 제거, Template.builder dead code 제거
  - LOW 1건 반영 권고 (빈 init() 메서드 제거)
  - Jira 재리뷰 코멘트 등록 (172528)
- **LUPR-706** Slack Block Kit 발송 엔드포인트 — 이미 완료 처리 확인
- **LUPR-683** 이벤트 예외 관리 재리뷰 → PASS
  - 커밋 9d627d4 확인, CRITICAL 5건 + HIGH 3건 + MEDIUM 5건 반영됨
  - 미진행 4건 사유 수용 (C6 Toast UI sanitize, H3 AND조건, M4 구조유지, M7 참고안내)
  - Jira 재리뷰 코멘트 등록 (172835), 코드리뷰 → 개발자 테스트 완료 전환
- **LUPR-690** 이벤트 관리 쿼리 수정 — 확인 완료
  - JOIN 제거 + 오타 수정, 특이사항 없음. 코멘트 등록 (172792), 코드리뷰 → 개발자 테스트 완료 전환
- **TECHIOPS26-57** 예외 관리 O11y 타입 → In Review
  - 설계 문서 기반 A.C. 5건 작성 (전부 DONE), In Progress → In Review 전환
- **TECHIOPS26-81** 메인터넌스 관리 O11y 타입 → In Review
  - 설계 문서 기반 A.C. 4건 작성 (전부 DONE), In Progress → In Review 전환
- **GitHub PR #4** claude-team-standards — APPROVE
  - ktcloud-kyoungmi: jira 윈도우 초기 설정 및 task 확인 스크립트 추가
  - 이전 요청(부록 분리) 반영 확인, frontmatter 태그 추가 + squash merge 권장 코멘트

## 기타

- O11y Mock API 서버 (`workspace/test-o11y-mock/`)
  - **1차 작성**: 이벤트 수집 API (cursor 페이지네이션) + 메인터넌스 API 4종
  - **2차 보강**: 이벤트 12→15건 (firing/resolved 3쌍 추가), 에러모드, 타겟 A/R 처리, Admin API
  - 시드 데이터: 이벤트 15건 (infra/service/platform, firing/resolved 3쌍, 미등록 2건) + 메인터넌스 5건
  - Python 2.7 호환 (CentOS 7, 외부 라이브러리 없음)
  - Admin API: POST /admin/config (에러모드 토글), POST /admin/reset (시드 데이터 원복)
  - test.sh: 17개 기능 테스트 (페이지네이션, 증분폴링, 에러모드, 타겟 A/R 검증, admin)
  - tc-spec.json: 37개 TC 구조화 스펙 (Playwright E2E 연동용)
- O11y 통합테스트 시나리오 갱신 (`07-integration-test.md`)
  - 15 이벤트 반영, cursor→seq 매핑, firing/resolved 쌍 검증 SQL 추가
- **O11y 예외 관리 설계 변경** — 이벤트 목록 조회를 API→DB 자체 목록으로 전환
  - `04-functional-spec.md` §7: O11y 이벤트 목록 `cmon_event_info DISTINCT` 방식으로 변경
  - `07-integration-test.md` §6: TC-EXC-001~005 사전조건·SQL 갱신
  - `tc-spec.json`: EXC TC에 `event_list_source` verify 항목 추가
  - DB 스키마 실물 검증: `event_name`→`target_item`, Service/Platform은 `hostname` 컬럼 확정
- Confluence 업데이트 2건
  - Mock 가이드 (1731430138): Admin API, 15이벤트 테이블, 변경이력 추가
  - TC 시나리오 (1732085292): 신규 생성 — 전체 TC 문서
- LUPR-692 관제삭제 — 기한(2/10) 경과, 진행사항 확인 요청 댓글 등록 (173048)
- Jira 이슈 링크 연결 3건
  - LUPR-704, LUPR-706, LUPR-705 → TECHIOPS26-128 동일목표 링크
- UTM VM 템플릿 초기화
  - rocky9.5-template: 이름 변경, 새 20GB 디스크, Rocky 9.5 ISO 마운트, EFI 초기화
  - centos7.9-template: 이름 변경, RAM 4GB→2GB
  - utmctl 심볼릭 링크 설정, qemu 설치 (brew)
- SOP 문서 작성: Luppiter DB 복구 절차
- **TECHIOPS26-100** E2E 테스트 보강 (luppiter_web_e2e)
  - **설비권한그룹 DB 수정**: test-users.ts 잘못된 테이블명(cmon_user_hostgroup) → 실제 테이블(cmon_group, cmon_group_user)로 전면 수정
  - **테스트 사용자 권한그룹 할당**: e2e_manager/operator → G0001(전체조회), e2e_ops/user → G0010(관제팀), global-setup/teardown 연동
  - **이벤트 이력 기반 권한 데이터 검증**: 실시간(0건)→이력(1개월 범위)으로 변경, TUI Grid row counting 수정, 4사용자 모두 12건 확인
  - **팝업/상세 워크플로우 테스트 코드 작성**: event-management(3 describe, ~10 TC), incident-management(1 describe, ~3 TC), maintenance(1 describe, ~4 TC)
  - **프로젝트 E2E 룰 생성**: `.claude/rules/e2e-testing.md` (데이터 변경 원칙, 권한그룹 구조, 커버리지 현황)
  - 결과: 191 passed / 12 skipped / 6 failed (기존 2 + 신규 4, 셀렉터 수정 필요)

## Jira 이슈

| 이슈 | 작업 내용 | 상태 변경 |
|------|----------|----------|
| LUPR-704 | Slack Block Kit 재리뷰 → PASS | 코드리뷰 → 개발자 테스트 완료 |
| LUPR-706 | Block Kit 발송 엔드포인트 완료 확인 | - |
| LUPR-683 | 이벤트 예외 관리 재리뷰 → PASS | 코드리뷰 → 개발자 테스트 완료 |
| LUPR-690 | 이벤트 관리 쿼리 수정 확인 | 코드리뷰 → 개발자 테스트 완료 |
| TECHIOPS26-57 | 예외 관리 O11y A.C. 완료 | In Progress → In Review |
| TECHIOPS26-81 | 메인터넌스 관리 O11y A.C. 완료 | In Progress → In Review |
| TECHIOPS26-100 | E2E 테스트 보강 (권한그룹 수정, 팝업 테스트 추가) | Backlog |

## 코드 리뷰

### LUPR-704 재리뷰 → PASS
- 커밋 b9f55dd, 이전 지적 5건 전부 반영
- LOW 1건 권고 (빈 init() 메서드 제거)

### LUPR-683 재리뷰 → PASS
- 커밋 9d627d4, CRITICAL 5 + HIGH 3 + MEDIUM 5건 반영
- 미진행 4건 사유 수용 (C6 Toast UI sanitize, H3 AND조건, M4 구조유지, M7 참고안내)

## 설계 결정

- **O11y 예외 이벤트 목록**: API 조회 → `cmon_event_info` DISTINCT 조회로 변경
  - Zabbix: API에서 전체 trigger 목록 조회
  - O11y: DB에서 실제 발생한 이벤트만 조회 (발생 이력 기반)
  - Infra: `WHERE target_ip = :ip AND type = 'infra'`
  - Service/Platform: `WHERE hostname = :target_name AND type = :svc_type`

## 특이사항

- LUPR-704/LUPR-706/LUPR-705 → TECHIOPS26-128 동일목표 Jira 링크 신규 연결
- UTM VM 기본 이미지 표준화 착수 (Rocky 9.5 / CentOS 7.9)
- cmon_event_info DB 스키마 실물 검증: O11y 설계문서 컬럼 매핑과 대조 완료

## 관련 문서

### Jira 이슈
| 키 | 설명 |
|----|------|
| [LUPR-704](https://ktcloud.atlassian.net/browse/LUPR-704) | Slack Block Kit 템플릿 시스템 |
| [LUPR-706](https://ktcloud.atlassian.net/browse/LUPR-706) | Block Kit 발송 엔드포인트 |
| [LUPR-705](https://ktcloud.atlassian.net/browse/LUPR-705) | Block Kit 관련 |
| [LUPR-683](https://ktcloud.atlassian.net/browse/LUPR-683) | 이벤트 예외 관리 |
| [LUPR-690](https://ktcloud.atlassian.net/browse/LUPR-690) | 이벤트 관리 쿼리 수정 |
| [LUPR-692](https://ktcloud.atlassian.net/browse/LUPR-692) | 관제삭제 (기한 2/10 경과) |
| [TECHIOPS26-57](https://ktcloud.atlassian.net/browse/TECHIOPS26-57) | 예외 관리 O11y 타입 |
| [TECHIOPS26-81](https://ktcloud.atlassian.net/browse/TECHIOPS26-81) | 메인터넌스 관리 O11y 타입 |
| [TECHIOPS26-128](https://ktcloud.atlassian.net/browse/TECHIOPS26-128) | 이벤트 조회 O11y 연동 |
| [TECHIOPS26-100](https://ktcloud.atlassian.net/browse/TECHIOPS26-100) | 유피테르 테스트 자동화 |
| [TECHIOPS26-173](https://ktcloud.atlassian.net/browse/TECHIOPS26-173) | 관제 대상 삭제 |

### Confluence
| 제목 | 링크 |
|------|------|
| STG O11y Mock API 서버 사용 가이드 | [SREP](https://ktcloud.atlassian.net/wiki/spaces/SREP/pages/1731430138) |
| STG O11y 통합테스트 시나리오 | [SREP](https://ktcloud.atlassian.net/wiki/spaces/SREP/pages/1732085292) |

### 로컬 설계 문서 (Next Observability)
| 문서 | 관련 섹션 |
|------|----------|
| [01-design.md](../../../../../../support-projects/next-observability/01-design.md) | §1.5 예외/메인터넌스, §6.5 테이블 확장 |
| [04-functional-spec.md](../../../../../../support-projects/next-observability/04-functional-spec.md) | §7 예외 관리, §8 메인터넌스 관리 |
| [05-api-spec-maintenance.md](../../../../../../support-projects/next-observability/05-api-spec-maintenance.md) | 메인터넌스 API 스펙 협의, §4 예외 관리 |
| [implementation-guide.md](../../../../../../support-projects/next-observability/implementation-guide.md) | §6.3 예외, §6.4 메인터넌스, §8.4-8.5 테스트 |
| [jira-issues.md](../../../../../../support-projects/next-observability/jira-issues.md) | TECHIOPS26-220 예외, TECHIOPS26-221 메인터넌스 |
| [README.md](../../../../../../support-projects/next-observability/README.md) | 프로젝트 전체 개요 |

### 로컬 변경/신규 파일
| 파일 | 내용 |
|------|------|
| [luppiter-db-기존서버-데이터복구.md](../../../../../../service/luppiter/sop/luppiter-db-기존서버-데이터복구.md) | SOP: DB 복구 절차 (신규) |
| [TASKS.md](../../../../../../service/luppiter/TASKS.md) | Luppiter 태스크 목록 |
| [07-integration-test.md](../../../../../../support-projects/next-observability/07-integration-test.md) | 통합테스트 시나리오 (15이벤트 반영) |
| [mock_server.py](../../../../../../../workspace/test-o11y-mock/mock_server.py) | Mock API 서버 (에러모드, Admin API 추가) |
| [tc-spec.json](../../../../../../../workspace/test-o11y-mock/tc-spec.json) | TC 구조화 스펙 37건 (신규) |
| [test.sh](../../../../../../../workspace/test-o11y-mock/test.sh) | Mock API 기능 테스트 17건 |

### GitHub
| 링크 | 설명 |
|------|------|
| [PR #4](https://github.com/kt-cloud-infra-ops/claude-team-standards/pull/4) | jira 윈도우 초기 설정 및 task 확인 스크립트 |

## 진행 중

- E2E 팝업/상세 테스트 신규 실패 4건 수정 대기
  - 이벤트 상세 팝업: TUI Grid 행 클릭 이벤트 방식 확인 필요
  - 인시던트 확대 버튼: 실시간→이력 페이지로 변경 필요
  - 컬럼 선택 팝업: checkbox→listitem 셀렉터 수정 필요

## 메모
