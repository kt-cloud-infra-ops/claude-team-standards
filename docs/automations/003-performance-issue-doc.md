# 자동화 패턴: 성능 이슈 분석 문서 템플릿

## 날짜
2026-01-28

## 발견된 반복 작업

세션 중 성능 이슈 분석 문서 작성:
- 이벤트 결합 시 timeout 이슈 분석
- 타임라인 작성 (2025-12-20 ~ 2026-01-19)
- 원인 분석 (5W1H)
- 즉시 조치 항목 정의
- 장기 개선 계획 수립
- 모니터링 지표 정의

향후 반복될 가능성이 높은 구조화된 분석 작업

## 자동화 방법

### 표준 문서 템플릿 제공

성능 이슈 분석 시 항상 사용하는 일관된 구조 제공

### 슬래시 커맨드 `/analyze-perf-issue`

```bash
/analyze-perf-issue \
  --title "Event Combination Timeout" \
  --component "CombineEventServiceJob" \
  --impact "high" \
  --duration "2025-12-20 ~ 2026-01-19"
```

## 구현

- [x] 템플릿 구조 정의
- [ ] 슬래시 커맨드 개발
- [ ] 마크다운 생성 자동화
- [ ] 지라 이슈 템플릿 연동

## 표준 템플릿

```markdown
# 성능 이슈 분석: [제목]

## 개요
- **영향도**: [Critical/High/Medium/Low]
- **상태**: [진행중/조치완료/모니터링중]
- **발견일**: YYYY-MM-DD
- **담당자**: [이름]

## 시스템 컨텍스트

### 영향받는 컴포넌트
- [컴포넌트 1]: [역할]
- [컴포넌트 2]: [역할]

### 관련 테이블/데이터
- [테이블 명]
  - 현재 행 수: [갯수]
  - 일일 증가율: [증가량]
  - 주요 인덱스: [인덱스명]

## 타임라인

| 일시 | 이벤트 | 영향도 |
|------|--------|--------|
| YYYY-MM-DD HH:mm | [첫 감지] | - |
| YYYY-MM-DD HH:mm | [원인 규명] | - |
| YYYY-MM-DD HH:mm | [임시 조치] | 완화 |
| YYYY-MM-DD HH:mm | [근본 해결] | 완료 |

**지속 기간**: [기간] (총 [영향건수])

## 원인 분석 (5W1H)

### What (무엇이 문제인가?)
[증상 설명]

### Why (왜 발생하는가?)
[근본 원인]

### When (언제 발생하는가?)
[시간/조건]

### Where (어디서 발생하는가?)
[위치/컴포넌트]

### Who (누가 영향받는가?)
[사용자/시스템]

### How (어떻게 표현되는가?)
[에러 메시지/징후]

## 기술 분석

### 성능 지표
```
[before]
- Query 시간: XXXX ms
- Memory: XXXX MB
- Throughput: XXX req/sec

[after]
- Query 시간: XXXX ms
- Memory: XXXX MB
- Throughput: XXX req/sec
```

### 코드 분석
```
병목 지점 1:
- 위치: [파일:라인]
- 문제: [설명]
- 성능 영향: [계산]

병목 지점 2:
- 위치: [파일:라인]
- 문제: [설명]
- 성능 영향: [계산]
```

## 즉시 조치 (1-3일)

### 1단계: 임시 완화
- [ ] 항목 1
- [ ] 항목 2
  - 예상 효과: X% 개선
  - 구현 시간: X 시간
  - 위험도: [Low/Medium/High]

### 2단계: 긴급 최적화
- [ ] 항목 1
- [ ] 항목 2
  - 예상 효과: X% 개선
  - 구현 시간: X 시간
  - 위험도: [Low/Medium/High]

## 장기 개선 (1-4주)

### Phase 1: 구조 개선 (1주)
**목표**: 기본 성능 회복
- [ ] 태스크 1
  - 비용: X 시간
  - 효과: X% 개선
- [ ] 태스크 2

### Phase 2: 최적화 (2주)
**목표**: 최고 성능 달성
- [ ] 태스크 1
  - 비용: X 시간
  - 효과: X% 개선
- [ ] 태스크 2

### Phase 3: 자동화 (3주)
**목표**: 재발 방지
- [ ] 모니터링 구현
- [ ] 자동 알림 설정
- [ ] 자동 확장(Auto-scaling) 구현

## 모니터링 & 방지

### 주요 메트릭
- **메트릭 1**: [임계값] (알림: [값] 초과시)
- **메트릭 2**: [임계값] (알림: [값] 초과시)
- **메트릭 3**: [임계값] (알림: [값] 초과시)

### 알림 규칙
```
IF [메트릭] > [임계값] FOR [기간]
THEN
  - Slack 알림
  - PagerDuty 호출
  - 자동 스케일링
  - 관리자 알림
```

### 재발 방지 계획
1. [예방 조치 1]
   - 담당자: [이름]
   - 완료 예정: YYYY-MM-DD

2. [예방 조치 2]
   - 담당자: [이름]
   - 완료 예정: YYYY-MM-DD

## 결과 & 교훈

### 개선 결과
| 메트릭 | Before | After | 개선율 |
|--------|--------|-------|--------|
| [메트릭1] | [값] | [값] | X% |
| [메트릭2] | [값] | [값] | X% |

### 배운 점
1. [교훈 1]
2. [교훈 2]
3. [교훈 3]

### 향후 예방
- [ ] 정책 수립
- [ ] 교육 시행
- [ ] 자동화 도입

## 참고 자료
- [관련 지라 이슈]
- [성능 측정 대시보드]
- [로그 링크]
- [코드 커밋]
```

## 예상 효과

- **시간 절약**: 문서 작성 30분 → 10분 (66% 단축)
- **일관성**: 모든 성능 이슈 문서의 구조 통일
- **추적성**: 타임라인과 메트릭으로 진행 상황 명확
- **재사용성**: 다른 팀도 동일한 템플릿 활용 가능

## 관련 프로젝트

- `luppiter-web`: 이벤트 처리 성능
- `luppiter_scheduler`: 배치 작업 성능
- `morning_report`: 리포트 생성 성능

## 우선순위

**MEDIUM** - 향후 성능 이슈 발생 시 문서화 시간 단축

## 참고

기존 성능 이슈 분석 문서:
- 파일: `/Users/jiwoong.kim/Documents/claude/docs/o11y/03-performance-analysis.md`
