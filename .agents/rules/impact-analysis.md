# Cross-Cutting Impact Analysis

## 핵심 원칙 (CRITICAL)

새 엔티티/테이블/기능을 기존 시스템에 추가할 때, **기능 개발 외에 기존 코드/쿼리/데이터에 파급되는 항목을 반드시 검토**한다.

## 언제 수행하는가

아래 상황에서 자동으로 영향도 분석을 수행:

1. **새 테이블 추가** — 기존 쿼리가 JOIN하던 테이블에 UNION이 필요한지
2. **새 코드값/타입 추가** — 공통코드, 매핑 테이블에 등록이 필요한지
3. **기존 스키마 변경** — ALTER TABLE 시 기존 INSERT/SELECT 영향
4. **새 도메인 엔티티** — 권한체계, 검색조건, 엑셀 다운로드, 대시보드 통계 등 횡단 기능

## 검토 체크리스트

| # | 항목 | 확인 |
|---|------|------|
| 1 | 기존 쿼리 JOIN 패턴 — 새 데이터가 기존 조회에서 누락되지 않는가 |  |
| 2 | 공통코드/매핑 테이블 — 새 타입/값이 등록되어 있는가 |  |
| 3 | 권한 체계 — 새 데이터가 기존 권한 필터에 포함되는가 |  |
| 4 | 검색/필터 조건 — 드롭다운, 필터에 새 항목이 나오는가 |  |
| 5 | 엑셀/리포트 — 다운로드 쿼리에 새 데이터가 포함되는가 |  |
| 6 | 대시보드/통계 — 집계 쿼리에 새 데이터가 반영되는가 |  |
| 7 | 기존 데이터 마이그레이션 — 새 컬럼의 기존 row 기본값 |  |
| 8 | 배치/스케줄러 — 백그라운드 작업에서 새 데이터 처리 |  |

## 산출물

영향도 분석 결과는 **설계 문서의 별도 섹션**(예: "기존 쿼리 영향도 분석")으로 포함한다. 임시 문서(docs/temp/)가 아닌 설계 문서에 포함하여 추적 가능하게 한다.

## 교훈 (Observability 사례)

- `cmon_service_inventory_master` 추가 시, `inventory_master`를 JOIN하는 30+ 쿼리 수정 필요
- 공통코드(CONTROL_AREA), zone 매핑, 권한그룹, 엑셀, 대시보드 등 8개 횡단 항목 발견
- 기능 설계서에 이 내용이 빠져 있어 사후에 cross-cutting 점검 티켓(TECHIOPS26-271) 생성

---

## Related Rules

- [coding-style.md](coding-style.md) - Code quality standards
- [security.md](security.md) - Security impact analysis
